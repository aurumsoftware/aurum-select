!function(){"use strict";angular.module("aurum-select",[]).directive("aurumSelect",["$filter","$document","$timeout",function(e,t,n){return{restrict:"AE",scope:{selectedModel:"=",options:"=",events:"=",search:"@",placeholder:"@",dynamicTitle:"@",label:"@",ngDisabled:"="},template:function(e,t){var n='<div class="select-parent btn-group dropdown-select" ng-class="{active: open}">';return n+='<button type="button" ng-disabled="ngDisabled" class="dropdown-toggle arButton" ng-class="settings.buttonClasses" ng-click="toggleDropdown()"><span class="arButtonLabel">{{getButtonText()}}&nbsp;</span><i class="caret"></i></button>',n+='<ul class="dropdown-menu dropdown-menu-form" ng-style="{display: (open) ? \'block\' : \'none\' }" style="overflow: scroll" >',n+='<li ng-show="enableSearch"><div class="dropdown-header"><input type="text" class="form-control" style="width: 100%;" ng-model="searchFilter" placeholder="{{texts.searchPlaceholder}}" /></li>',n+='<li class="presentation" role="presentation" ng-repeat="option in options | filter: searchFilter">',n+="<div class=\"menu-item\" data-ng-class=\"{'selected': isChecked(getPropertyForObject(option)), 'not-selected': !isChecked(getPropertyForObject(option))}\">",n+='<div class="menu-item-label" role="menuitem" tabindex="-1" ng-click="setSelectedItem(getPropertyForObject(option))" title="{{getPropertyForObject(option)}}" >{{getPropertyForObjectLabel(option, settings.displayProp)}}</div>',n+="</li>",n+="</ul>",n+="</div>"},link:function(e,l,o){function r(e){for(var t in e)delete e[t]}"false"===o.dynamicTitle?e.dynamicTitle=!1:e.dynamicTitle=!0,e.settings={displayProp:o.label,buttonClasses:"btn btn-default",dynamicTitle:e.dynamicTitle,smartButtonTextConverter:angular.noop},e.texts={searchPlaceholder:o.search,buttonDefaultText:o.placeholder||"Select",dynamicButtonTextSuffix:"checked"},e.externalEvents={onItemSelect:angular.noop,onInitDone:angular.noop},o.search?e.enableSearch=!0:e.enableSearch=!1;var s=l.children()[0];e.toggleDropdown=function(){e.open=!e.open,n(function(){l[0].querySelector(".form-control").focus()},200)},e.searchFilter=e.searchFilter||"",angular.extend(e.settings,e.extraSettings||[]),angular.extend(e.externalEvents,e.events||[]),angular.extend(e.texts,e.translationTexts),angular.isArray(e.selectedModel)&&0===e.selectedModel.length&&r(e.selectedModel);var a=function(t){for(var n=t.target.parentElement,l=!1;angular.isDefined(n)&&null!==n&&!l;)_.contains(n.className.split(" "),"select-parent")&&!l&&n===s&&(l=!0),n=n.parentElement;l||e.$apply(function(){e.open=!1})};t.on("click",a),e.$on("$destroy",function(){e.settings.closeOnBlur&&t.off("click",a)}),e.getButtonText=function(){if(e.settings.dynamicTitle&&angular.isObject(e.selectedModel)&&(e.selectedModel.length>0||_.keys(e.selectedModel).length>0)){var t=[];return angular.forEach(e.options,function(n){if(e.isChecked(e.getPropertyForObject(n))){var l=e.getPropertyForObjectLabel(n,e.settings.displayProp),o=e.settings.smartButtonTextConverter(l,n);t.push(o?o:l)}}),t.join(", ")}return e.texts.buttonDefaultText},e.getPropertyForObject=function(e){return angular.isDefined(e)?e:""},e.getPropertyForObjectLabel=function(e,t){return angular.isDefined(e)&&e.hasOwnProperty(t)?e[t]:""},e.setSelectedItem=function(t){r(e.selectedModel),angular.extend(e.selectedModel,t),e.externalEvents.onItemSelect(t),e.open=!1},e.isChecked=function(t){return null!==e.selectedModel&&angular.isDefined(e.selectedModel)&&e.selectedModel[e.settings.displayProp]===t[e.settings.displayProp]},e.externalEvents.onInitDone()}}}])}();